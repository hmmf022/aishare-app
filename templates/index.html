{% extends 'base.html' %}

{% block title %}事例一覧 - {{ super() }}{% endblock %}

{% block content %}
<section class="post-list">
    <h2>事例一覧</h2>
    <div class="cards">
        {% for post in posts %}
        <div class="card" data-post-id="{{ post.id }}">
            <h3 class="card-title">
                <a href="{{ post.url }}" target="_blank" rel="noopener noreferrer">{{ post.title }}</a>
            </h3>
            <div class="card-tags">
                {% if post.tags %}
                    {% for tag_name in post.tags.split(',') %}
                    <span class="tag">#{{ tag_name }}</span>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="card-footer">
                <div class="actions">
                    <button class="like-btn {% if post.is_liked %}active{% endif %}" data-post-id="{{ post.id }}">
                        ♡ <span class="like-count">{{ post.likes_count }}</span>
                    </button>
                    <button class="favorite-btn {% if post.is_favorited %}active{% endif %}" data-post-id="{{ post.id }}">☆</button>
                </div>
                <time class="post-date">{{ post.created_at.split(' ')[0] if post.created_at else '' }}</time>
            </div>
        </div>
        {% else %}
        <p>まだ投稿がありません。最初の事例を投稿してみましょう！</p>
        {% endfor %}
    </div>
</section>
{% endblock %}
